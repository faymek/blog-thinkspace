---
layout: post
title: "WSL ä½¿ç”¨ç¬”è®°"
comments: true
description: "å…³äºWSLçš„å‚è€ƒåšå®¢å¾ˆå¤šï¼Œåœ¨æ­¤è¾‘å½•å°‘è®¸ï¼Œä¹Ÿå°†è‡ªå·±é‡åˆ°çš„å‘ç¨åŠ ç¼–æ’°ã€‚"
keywords: "WSL"
---



å…³äºWSLçš„å‚è€ƒæ–‡ç« å¾ˆå¤šï¼Œåœ¨æ­¤è¾‘å½•å°‘è®¸ï¼Œä¹Ÿå°†è‡ªå·±é‡åˆ°çš„å‘ç¨åŠ ç¼–æ’°ã€‚

## å‚è€ƒ

**WSLå®‰è£…è¿‡ç¨‹**

- [ç®€æ˜çš„WSLæ•™ç¨‹](https://zhuanlan.zhihu.com/p/24537874)
- [WSL ä½¿ç”¨æŒ‡å—](https://zhuanlan.zhihu.com/WindowsSubsystemForLinux)
- [Windows Subsystem for Linuxï¼ˆWSLï¼‰ç¯å¢ƒä¸‹ä½¿ç”¨å›¾å½¢ç•Œé¢è½¯ä»¶](https://zhuanlan.zhihu.com/p/36784160?utm_source=qq&utm_medium=social&utm_oi=614502969539039232)
- [WSL é…ç½®æŒ‡åŒ—ï¼šæ‰“é€  Windows æœ€å¼ºå‘½ä»¤è¡Œ](https://blessing.studio/wsl-guide/)

**ç¾åŒ–åŠå¼€å‘ç¯å¢ƒé…ç½®**

- [Dev on Windows with WSLï¼Œåœ¨ Windows ä¸Šç”¨ WSL ä¼˜é›…å¼€å‘](https://spencerwoo.com/dowww/) 

  ç»™å‡ºäº†WSLçš„â€œæœ€ç¾â€å®è·µï¼Œè§è§£åŒ…æ‹¬`Hyper ç»ˆç«¯`ï¼Œ`VSCodeå¼€å‘ç¯å¢ƒ `ï¼ˆ Python å’Œ C/C++ï¼‰`X-Server` å›¾å½¢ç•Œé¢

- [Webdev on Windows with WSL and VS Code](https://daverupert.com/2018/04/developing-on-windows-with-wsl-and-visual-studio-code/)

  WSL+VSCodeçš„å¼€å‘ç¯å¢ƒé…ç½®ï¼ŒåŒ…æ‹¬Git, Python, Node, Ruby

- [Setup Ubuntu 18.04 on WSL on Windows 10 Pro](https://estuarine.jp/2018/07/setup-ubuntu-18-04-wsl/?lang=en)

**è®¾ç½®WSLçš„é»˜è®¤æµè§ˆå™¨ä¸ºWindowsä¸‹çš„Chrome**

- [WSL(windows subsytem linux)ä¸‹æ·»åŠ ç½‘ç»œæµè§ˆå™¨æ”¯æŒ](https://www.smslit.top/2017/09/02/wsl-webbrowser/)
- [Setting the default browser when update-alternatives fails](http://shallowsky.com/blog/linux/ubuntu-default-browser.html)
- [åœ¨WSLä¸Šè°ƒç”¨windowsä¸‹çš„chromedriveråŠchromeæµè§ˆå™¨è¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•æˆ–çˆ¬å–ç½‘é¡µå†…å®¹](https://blog.csdn.net/qq_41014622/article/details/81515741)



## å®‰è£…è¿‡ç¨‹

ä¸Šæ‰‹ä¸¤æ˜ŸæœŸæœ‰ä½™ï¼Œæ›´æ–°åˆ°Windows 18272ä¹‹åçªç„¶ä¸èƒ½å¼€å¯äº†ï¼Œå…ˆæŠŠWSLå¤åˆ¶ç„¶åé‡ç½®äº†ï¼Œåˆ°WSLçš„github issueå‘ç°è¿™ä¸ªç‰ˆæœ¬æœ‰é—®é¢˜ï¼Œäºæ˜¯å›æ»šåˆ°ä¸Šä¸ªç‰ˆæœ¬ã€‚ä½†æ˜¯ç³»ç»Ÿæ€ä¹ˆä¹Ÿæ¢å¤ä¸äº†ã€‚æ— å¥ˆï¼Œåªèƒ½å†å®‰è£…ä¸€æ¬¡ï¼Œé¡ºä¾¿å†™ä¸ªè¯¦ç»†ç‚¹çš„æ—¥å¿—ã€‚

### 1. å®‰è£…å‡†å¤‡

- ç”³è¯·Inside é¢„è§ˆè®¡åˆ’

éœ€è¦å¼€å¯å¼€å‘è€…æ¨¡å¼ï¼Œä¸ç„¶é‚£å¯èƒ½ä¼šå‡ºé—®é¢˜ï¼Œæ¥å—ä¸åˆ°æ›´æ–°

- æ›´æ–°å¹¶å¼€å¯WSLæœåŠ¡ï¼Œå»é™¤æ°´å° http://www.udashi.com/article/11621.html
- Microsoft Store å®‰è£… Ubuntuï¼Œå¯ä»¥ä¸ç®¡Ubuntu 18.04é‚£ä¸ªåº”ç”¨

æŸ¥çœ‹å½“å‰ç³»ç»Ÿç‰ˆæœ¬

```
cat /etc/issue
```



å¦‚ä¸‹ç­‰å¾…å†™ä½œï¼š

- åˆ‡æ¢ç”¨æˆ·

- å¸è½½wsl

- [WSLä¸‹ä½¿ç”¨VcXsrvå¯åŠ¨chromium browseråŠå¸¸è§é”™è¯¯è§£æ (ubuntu18.04ï¼Œ å›¾å½¢ç•Œé¢)](https://www.cnblogs.com/freestylesoccor/p/9630758.html)

- cannot change locale UTF-8 https://blog.csdn.net/wave_1102/article/details/45116783

- å®‰è£…æ¡Œé¢ç¯å¢ƒ xfce gnome tweak é«˜åˆ†å±  https://zhuanlan.zhihu.com/p/34884285

- ä¸å…³æœºé‡å¯ï¼ŒæŸ¥çœ‹å¼€æœºæ—¶é—´ uptime

-  [WSLä¸Windowsäº¤äº’å®è·µ](https://www.cnblogs.com/mushroom/p/8969338.html)



### 2. æ›´æ¢è½¯ä»¶æºå¹¶æ›´æ–°è½¯ä»¶

Ubuntu çš„è½¯ä»¶æºé…ç½®æ–‡ä»¶æ˜¯ `/etc/apt/sources.list`ï¼Œæˆ‘ä»¬å°†å…¶æ›´æ¢ä¸ºå›½å†…è½¯ä»¶æºï¼Œæ¥åŠ å¿«æ›´æ–°çš„ä¸‹è½½é€Ÿåº¦ã€‚æ‰“å¼€ [æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™](https://link.zhihu.com/?target=https%3A//mirrors.tuna.tsinghua.edu.cn/help/ubuntu/)ï¼Œé€‰æ‹©è‡ªå·±çš„Ubuntuç‰ˆæœ¬ï¼Œå¾—åˆ°è¯¥æ–‡ä»¶å†…å®¹ã€‚å…ˆå¤‡ä»½ç³»ç»ŸåŸæ–‡ä»¶ï¼Œå†åˆ›å»ºæ–°æ–‡ä»¶ï¼Œå³å¯ä½¿ç”¨ TUNA çš„è½¯ä»¶æºé•œåƒã€‚Ubuntuå‘½ä»¤è¡Œè¾“å…¥ï¼š

```bash
sudo mv /etc/apt/sources.list /etc/apt/sources.list.bak
sudo touch /etc/apt/sources.list
sudo vi /etc/apt/sources.list
# ç„¶åå°†é•œåƒå†…å®¹ç²˜è´´è¿›æ¥ä¿å­˜
```

æ‰§è¡Œä¸‹é¢ä»£ç ï¼Œæ›´æ–°æ‰€éœ€è½¯ä»¶ï¼Œè¿™éœ€è¦ä¸€å®šæ—¶é—´ã€‚å¦‚æœå‘ç°æ²¡æœ‰è”ç½‘ï¼Œå¯ä»¥é‡å¯ç”µè„‘å†è¯•ï¼š

```bash
# æ›´æ–°è½¯ä»¶åˆ°æœ€æ–°
sudo apt-get update && sudo apt-get --assume-yes upgrade
sudo apt autoremove
```



### 3. æ›´å¥½ç”¨çš„Terminal

Windowsè‡ªå¸¦çš„ç»ˆç«¯å®åœ¨æƒ¨ä¸å¿ç¹ï¼Œä½œä¸ºæ›¿ä»£ï¼Œå¯ä»¥ä½¿ç”¨ [wsl-terminal](https://goreliu.github.io/wsl-terminal/README.zh_CN.html)ï¼Œç®€å•å‡ æ­¥å°±èƒ½æœ‰ä½“éªŒåŸç”Ÿèˆ¬çš„ä½“éªŒã€‚

- å¿«é€Ÿæ‰“å¼€wsl-terminalå¹¶è¿›å…¥HOMEç›®å½•ï¼š

  æ–°å»º *wsl-terminal-home-path.bat* æ–‡ä»¶:

```powershell
path\to\your\open-wsl.exe -l
```

â€‹	å»ºç«‹è¯¥æ–‡ä»¶çš„å¿«æ·æ–¹å¼ï¼Œæ›´æ”¹åç§°ï¼Œè‡ªå®šä¹‰[å›¾æ ‡](https://findicons.com/search/ubuntu)ï¼Œå¹¶å°†å¿«æ·æ–¹å¼æ”¾åˆ°`C:\ProgramData\Microsoft\Windows\Start Menu\Programs\` ä¸‹é¢ï¼Œå³å¯é€šè¿‡Winé”®å¿«é€Ÿæ‰“å¼€ï¼ŒçœŸé¦™ï¼

<img src="https://i.loli.net/2018/11/04/5bdf0eb19706f.png" width="75%" height="75%" />

- åœ¨å½“å‰ä½ç½®é€šè¿‡å³é”®menuå¯åŠ¨ WSL

  è¿è¡Œwsl-terminalç›®å½•ä¸‹ `./tools/1-add-open-wsl-terminal-here-menu.js` å°±å®Œæˆäº†

- wsl-terminalæ›´å¤šå®ç”¨æŠ€æ³•

  æ›´å¤šç”¨æ³•å¯ä»¥å‚è€ƒå…¶å®˜ç½‘è¯´æ˜ï¼Œæˆ–è€…è¿™ä½çŸ¥å‹çš„[ä¸“æ æ–‡ç« ](https://zhuanlan.zhihu.com/p/36784160?utm_source=qq&utm_medium=social&utm_oi=614502969539039232)ã€‚

- wsl-terminal ä½¿ç”¨ zsh é‡åˆ°çš„å‘

  å¦‚æœç®€å•çš„ä½¿ç”¨ chsh -s /bin/zsh å‘½ä»¤ä¼šå°´å°¬çš„å‘ç° wsl-terminal å¯åŠ¨åè¿˜æ˜¯bashï¼Œè€ŒwslåŸç”Ÿçš„shellè¿›å…¥çš„è¯å°±ç›´æ¥æ˜¯zshäº†ï¼Œè¿™æ˜¾ç„¶æ˜¯å¼€å€’è½¦ï¼Œä»¤äººæ— æ³•æ¥å—ã€‚ç»è¿‡æŠ˜è…¾å‘ç°ï¼šæ‰§è¡Œä¸Šé¢ä»£ç åéœ€è¦å°†wsl-terminalæ ¹ç›®å½•ä¸‹ ./etc/wsl-terminal.conf é‡Œçš„ shell=/bin/bash æ”¹æˆ shell=/bin/zsh å°±å¥½äº†ã€‚

  ä¹‹å‰æ‰€éœ€çš„ç¯å¢ƒä¿¡æ¯å¯ä»¥æ”¾åœ¨`~/.zshenv` æ–‡ä»¶é‡Œå°±å¥½äº†ã€‚

- **terminal çš„å…¶ä»–é€‰æ‹©**
  - [Hyperç»ˆç«¯](https://spencerwoo.com/dowww/2-Toolchain/2-1-TerminalEnv.html#hyper-%E7%BB%88%E7%AB%AF)ï¼Œå¯èƒ½æ˜¯Windowsä¸Šå®šåˆ¶åŒ–ç¨‹åº¦æœ€é«˜çš„ç»ˆç«¯
  - [cmder | Console Emulator](https://link.zhihu.com/?target=http%3A//cmder.net/)ï¼ŒåŒæ—¶æ”¯æŒ CMDï¼ŒPowershell å’Œ WSL



### 4. æ¡Œé¢ç¯å¢ƒå’ŒX-server

ç¬”è€…å°è¯•è¿‡å®‰è£…Gnomeï¼Œä»¥å¤±è´¥å‘Šç»ˆï¼Œæ­¤å¤„å¯ä»¥é€‰æ‹©è½»é‡çº§çš„æ¡Œé¢xfce4ï¼Œå®‰è£…æ‰€éœ€æ—¶é—´è¾ƒé•¿ï¼š

```bash
# ä¸ºäº†xorgï¼Œå®‰è£…ä¸‹xfce4
sudo apt-get install --assume-yes xfce4
sudo apt-get install --assume-yes xorg-dev
```

å› ä¸º WSL åªèƒ½æ˜¯å‘½ä»¤è¡Œå½¢å¼çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨ X-server ï¼Œè®© Ubuntu é‡Œè¿è¡Œçš„GUI ç¨‹åºæœ‰çª—å£æ˜¾ç¤ºã€‚å¯ä»¥ä½¿ç”¨ [VcXsrv Windows X Server](https://sourceforge.net/projects/vcxsrv/)ï¼Œå¹¶ä»¥è¿™æ ·çš„é…ç½®æ‰“å¼€ï¼š

![img](https://i.loli.net/2018/10/01/5bb1c9d292ce0.jpg)

è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# å®‰è£…å¿…è¦ç»„ä»¶
sudo apt install libgtk2.0-0 libxss1 libasound2
# é…ç½®æ˜¾ç¤ºå‚æ•°
echo 'export DISPLAY=:0.0' >> .profile
# æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ
sudo apt install x11-apps -y && xeyes
```

å¦‚æœå‡ºç°äº†è·Ÿéšé¼ æ ‡è½¬åŠ¨çš„å°çœ¼ç›ï¼Œé‚£ä¹ˆ XServer å°±å®‰è£…æˆåŠŸäº†ï¼Œèƒ½å¤Ÿæ˜¾ç¤ºUbuntué‡Œçš„GUIç¨‹åºã€‚

X-serverçš„å…¶ä»–é€‰æ‹©
- [MobaXterm](https://mobaxterm.mobatek.net/)ï¼Œé…ç½®å¯å‚è€ƒçŸ¥å‹å‘¨æ•æµ©çš„[ä¸“æ æ–‡ç« ](https://zhuanlan.zhihu.com/p/36784160?utm_source=qq&utm_medium=social&utm_oi=614502969539039232)ã€‚
- X410,   å¯¹é«˜åˆ†å±åšäº†ä¼˜åŒ–ï¼Œé…ç½®å¯å‚è€ƒçŸ¥å‹æ¨å¸†çš„[ä¸“æ æ–‡ç« ](https://zhuanlan.zhihu.com/p/39446214)



### 5. ä¸­æ–‡è¾“å…¥å’Œæ˜¾ç¤º

åœ¨WSLä¸­ï¼ŒWindowsæ–‡ä»¶å·²ç»mountåœ¨/mnt/ä¸‹é¢ï¼Œæˆ‘ä»¬å°†Windowsçš„å­—ä½“æ–‡ä»¶å…¨éƒ¨å¯¼å…¥åˆ°WSLçš„å­—ä½“ä¸­ï¼š

```bash
# å°†windowsçš„å­—ä½“æ”¾å…¥ubuntué‡Œï¼Œå¹¶æ›´æ–°ç¼“å­˜
sudo mkdir /usr/share/fonts/windows
sudo cp -r /mnt/c/Windows/Fonts/*.ttf /usr/share/fonts/windows/
fc-cache
```

å®‰è£…ä¸­æ–‡è¾“å…¥æ³•

- å®‰è£…è°·æ­Œæ‹¼éŸ³ï¼š

```bash
# å®‰è£…è¾“å…¥æ³•åŠæ‰€éœ€çš„åŒ…ï¼Œè¿™é‡Œé€‰æ‹©è°·æ­Œè¾“å…¥æ³•
sudo apt-get --assume-yes install fcitx fcitx-googlepinyin dbus-x11
```

- è®¾ç½®zh_CN.UTF-8

```bash
sudo locale-gen zh_CN.UTF-8
```

- è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œå°†ä¸‹é¢ä»£ç æ·»åŠ åˆ°`~/.profile`æ–‡ä»¶é‡Œï¼Œç„¶åé‡å¯ä¸‹shellã€‚

```bash
# è®¾ç½®ä¸­æ–‡ & è¾“å…¥æ³•
export LC_ALL="zh_CN.UTF-8"
export XMODIFIERS=@im=fcitx
export GTK_IM_MODULE=fcitx
export QT_IM_MODULE=fcitx
```

- ä¸­æ–‡è¾“å…¥æ³•è®¾ç½®

```bash
# å¦‚æœè¿è¡Œæ—¶é•¿æ—¶é—´å¡ä½ï¼ŒæŒ‰å›è½¦
fcitx
fcitx-configtool
```

- è¿è¡Œè¾“å…¥æ³•çš„ GUI è®¾ç½®å·¥å…·ï¼Œé€šè¿‡ `+` `-` è°ƒæ•´å€™é€‰è¾“å…¥æ³•ï¼Œå¯é€‰é¡¹è¦è‡³å°‘åŒ…å«ï¼šEnglish(US)å’Œ Google Pinyinã€‚ä¸ºäº†ä¸ä¸Windowsçš„å¿«æ·é”®å†²çªï¼Œè¿™é‡Œå°†è¾“å…¥æ³•åˆ‡æ¢å¿«æ·é”®æ”¹æˆäº†``Ctrl + ` ``ï¼š

<img src="https://i.loli.net/2018/11/04/5bdf06358ce2e.png" width="75%" height="75%" />

<img src="https://i.loli.net/2018/11/04/5bdf06a02344b.png" width="75%" height="75%" />

ç”±äºæ¯æ¬¡å¼€æœºåå¯åŠ¨WSLï¼Œé»˜è®¤ä¸ä¼šå¯åŠ¨dbus å’Œ fcitxæœåŠ¡ï¼Œéœ€è¦è®¾ç½®

- è®¾ç½®å¼€æœºå¯åŠ¨ dbus å’Œ fcitx æœåŠ¡ï¼Œå¯ä»¥å°†ä¸‹é¢ä»£ç æ·»åŠ åˆ°`~/.bashrc`ï¼š

```bash
if [ $(ps -ax | grep dbus-daemon | wc -l) -eq 1 ]; then
  eval `dbus-launch fcitx > /dev/null 2>&1`
fi
```

å¦‚æœä»å‡ºç°æ— æ³•è¾“å…¥ä¸­æ–‡çš„æƒ…å†µï¼Œåˆ™åœ¨shellå†…æ‰‹åŠ¨è¾“å…¥ä»¥ä¸‹ä»£ç ï¼š

```bash
# å¦‚æœç”¨çš„æ˜¯ zshï¼Œåˆ™å°† bash æ”¹æˆ zsh
dbus-run-session -- bash
fcitx
```



### 6. ç®¡ç† wsl çš„ç›¸å…³å‘½ä»¤

åœ¨ cmd / PowerShell ä¸­è¿è¡Œ wsl , bash, Linuxç³»ç»Ÿåç§°ï¼ˆå¦‚ ubuntuï¼‰ï¼Œå³å¯è¿›å…¥ Linux ç³»ç»Ÿã€‚

ä»¥ä¸‹å‘½ä»¤éƒ½æ˜¯åœ¨cmd / powershell ä¸‹è¿è¡Œæ¥ç®¡ç†å­ç³»ç»Ÿï¼š

```powershell
// è®¾ç½®é»˜è®¤è¿è¡Œçš„linuxç³»ç»Ÿ
wslconfig /setdefault <DistributionName>
// å¸è½½linuxç³»ç»Ÿ
wslconfig /unregister <DistributionName>
// æŸ¥çœ‹å·²å®‰è£…çš„linuxç³»ç»Ÿ
wslconfig /list
// è®¾ç½®é»˜è®¤ç™»é™†ç”¨æˆ·
ubuntu config --default-user root
```

å¦‚æœWSLæŸåï¼Œå¯ä»¥æŠŠå­ç³»ç»Ÿåˆ äº†é‡æ¥

```text
 // åˆ é™¤ Ubuntu å­ç³»ç»Ÿ
wslconfig /unregister Ubuntu
```



## å¼€å‘ç¯å¢ƒé…ç½®

### 1. zsh ä¸ oh-my-zsh

æƒ³è¦å¿«ä¹åœ°ä½¿ç”¨å‘½ä»¤è¡Œï¼Œä¸€ä¸ªè¶æ‰‹çš„ Shell æ˜¯å¿…ä¸å¯å°‘çš„ã€‚

- ä¸‹è½½å®‰è£… `zsh` ä»£æ›¿è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½æ¬ ç¼ºçš„ `bash`ï¼š

  åˆ©ç”¨ Ubuntu çš„åŒ…ç®¡ç†å™¨å®‰è£… `zsh`ï¼š`sudo apt install zsh`

  ä¿®æ”¹ `.bashrc` åŠ å…¥ä»¥ä¸‹ä»£ç ï¼Œä½¿å¾—é»˜è®¤ `shell` å˜æˆ `zsh`ï¼š

  ```bash
  if [ -t 1 ]; then
  	exec zsh
  fi
  ```

  åŠ è½½è®¾ç½®ï¼š`source ~/.bashrc`

- ä¸‹è½½å®‰è£… [`oh-my-zsh`](https://ohmyz.sh/)ï¼Œä¸€ä¸ªå¥½ç”¨çš„ `zsh` é…ç½®ç®¡ç†å·¥å…·ï¼š

  è¿è¡Œå‘½ä»¤ä¸‹è½½å®‰è£…ï¼š`sh -c "$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)"` ï¼ˆæé†’æ²¡æœ‰ä»€ä¹ˆå°±å®‰è£…ä»€ä¹ˆã€‚ï¼‰

- å»é™¤ `ls` å’Œ `cd` å‘½ä»¤ä¹‹åèƒŒæ™¯è‰²å‡ºç°çš„é—®é¢˜ï¼š

  ä¿®æ”¹ `.zshrc`ï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç 

```bash
# Change ls colours
LS_COLORS="ow=01;36;40" && export LS_COLORS

# make cd use the ls colours
zstyle ':completion:*' list-colors "${(@s.:.)LS_COLORS}"
autoload -Uz compinit
compinit
```

åŠ è½½è®¾ç½®ï¼š`source ~/.zshrc`

åŸºæœ¬çš„ç»ˆç«¯ç¯å¢ƒå°±åˆ°è¿™é‡Œäº†ã€‚



### 2. Pythonå¼€å‘ç¯å¢ƒ

[é€‰æ‹© MiniConda è¿˜æ˜¯ Anaconda ï¼Ÿ](https://stackoverflow.com/questions/45421163/anaconda-vs-miniconda) `conda` æ˜¯åŒ…ç®¡ç†å·¥å…·ï¼Œ`miniconda` å‘è¡Œç‰ˆåœ¨æ­¤åŸºç¡€ä¸Šæ†ç»‘äº†å°‘é‡çš„åŒ…ï¼Œ`anaconda` å‘è¡Œç‰ˆåˆ™æ†ç»‘äº†è¶³é‡çš„åŒ…ï¼Œæ­¤å¤„å¯ä»¥æŒ‰ç…§ä¸ªäººéœ€æ±‚é€‰æ‹©ã€‚

- å®‰è£… Minicondaï¼Œä¸€è·¯ Enter ï¼Œæœ€åä¸€æ­¥é€‰ `yes`ã€‚

```bash
wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh
bash Miniconda3-latest-Linux-x86_64.sh
```

- å°†TUNAæºåŠ å…¥ conda ï¼š

  ```
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
conda config --set show_channel_urls yes
  ```

- å¦‚æœéœ€è¦æ›´æ”¹é»˜è®¤ç¯å¢ƒçš„Pythonç‰ˆæœ¬ï¼Œä½¿ç”¨`conda install python=3.6`

  ç¬”è€…æ­¤æ—¶é»˜è®¤å®‰è£…çš„Py3.7.1 è¿˜æœ‰å¾ˆå¤šåº“çš„é—®é¢˜ï¼Œä¸ºäº†çœå»è¿™ä¸ªéº»çƒ¦ï¼Œé€‰æ‹©å›é€€åˆ°Py3.6ç‰ˆæœ¬ã€‚

- æ¥ä¸‹æ¥æ›´æ–°åŒ…ï¼š

```bash
conda update conda
conda update --all
```

- å®‰è£…å¸¸ç”¨åŒ…

```bash
conda install jupyter notebook pandas matplotlib numpy scipy
```



è®¾ç½® pip æº

- ä¿®æ”¹ `~/.pip/pip.conf `ï¼Œæ²¡æœ‰å°±å…ˆåˆ›å»ºæ–‡ä»¶å¤¹åŠæ–‡ä»¶ï¼š

```bash
mkdir ~/.pip
vim ~/.pip/pip.conf
```

- åŠ å…¥å¦‚ä¸‹å†…å®¹ï¼š

```
[global]
index-url = https://pypi.tuna.tsinghua.edu.cn/simple
[install]
trusted-host=mirrors.aliyun.com
```



### 3. Jupyter ç›¸å…³

`Jupyter notebook` / `JupyterLab`å¯åŠ¨ç›¸å…³

å®‰è£…ä½“éªŒ JupyterLab ï¼š `conda install -c conda-forge jupyterlab` æˆ–è€… `pip install jupyterlab`

ä½¿ç”¨X-serveræ‰“å¼€WSLå†…ç½®çš„FireFoxæµè§ˆå™¨ï¼Œäº¤äº’ä¸Šå¯èƒ½ä¸å¤ªä¾¿æ·ï¼Œä¸ªåˆ«X-serverå¯èƒ½ä¼šå‡ºç°æŒ‰é”®è¿ç»­å“åº”çš„æƒ…å†µï¼Œå¯ä»¥ç”¨å¦‚ä¸‹æ–¹æ³•åœ¨Windows ä¸‹çš„æµè§ˆå™¨ä¸­æ‰“å¼€ã€‚å…ˆè®©jupyterè¿è¡Œåœ¨æ— æµè§ˆå™¨æ¨¡å¼ï¼š

```bash
jupyter notebook --no-browser
jupyter lab --no-browser
```

ç„¶ååœ¨ä½ çš„Terminalé‡Œç‚¹å‡»é“¾æ¥ï¼Œå°±æ˜¯ç”¨Windowsä¸‹çš„æµè§ˆå™¨æ‰“å¼€äº†ã€‚ï¼ˆè¦ç‚¹å‡»æ–œæ ä½ç½®å“¦ :computer_mouse: ï¼Œè¿™æ ·æ‰èƒ½è¯†åˆ«å®Œæ•´çš„é“¾æ¥ï¼‰ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥æ›´æ”¹wslçš„é»˜è®¤æµè§ˆå™¨ä¸ºWindowsä¸‹çš„æµè§ˆå™¨ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚

ä¸ºäº†å¯åŠ¨æ–¹ä¾¿ï¼Œå¯ä»¥åœ¨`~/.bashrc`é‡Œè®¾ç½®åˆ«åï¼š

```bash
alias jnote='jupyter notebook --no-browser'
alias jlab='jupyter lab --no-browser'
```



é“¾æ¥Windowsä¸‹çš„Matlab

æ­¤å¤„è¦æ³¨æ„matlabçš„ç‰ˆæœ¬æ”¯æŒé—®é¢˜ï¼ŒMatlabR2018bç‰ˆæœ¬æ”¯æŒPython 2.7, 3.5, 3.6ï¼Œå¦‚ä½ ä½¿ç”¨3.7ç‰ˆæœ¬ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹æ³•é­”æ”¹ï¼š[Jupyter Notebook(Python3.7)å¦‚ä½•æ”¯æŒMATLABï¼Ÿ](https://jingyan.baidu.com/article/4853e1e5b962ac1909f726ea.html)

- åœ¨wslä¾§å®‰è£…matlab_kernel ï¼š`pip install matlab_kernel`
- åœ¨Windowsä¾§æ‰“å¼€matlabå®‰è£…çš„å¦‚ä¸‹ä½ç½®ï¼š`MATLABç‰ˆæœ¬å·/extern/engines/python`ï¼Œåœ¨æ­¤å¤„æ‰“å¼€wsl-terminal
- è¿è¡Œï¼š`python setup.py install`
- åœ¨Jupyterä¸‹å°±èƒ½çœ‹åˆ°å•¦ï¼Œä½†æ˜¯æç¤º No kernel æ— æ³•è¿è¡Œï¼Œå¾…è§£å†³ :sob:

> OSError: Please reinstall MATLAB Engine for Python or contact MathWorks Technical Support for assistance: No module named 'matlabengineforpython3_6'
>
> matlab-kernel         0.15.2
> matlabengineforpython R2018a
>
> å¯èƒ½æ˜¯éœ€è¦é­”æ”¹ä¸€ç•ªäº†ã€‚

å¦‚ä½•å¸è½½ï¼š

```bash
setup.py å¸®åŠ©ä½ çºªå½•å®‰è£…ç»†èŠ‚æ–¹ä¾¿ä½ å¸è½½
python setup.py install --record log
è¿™æ—¶æ‰€æœ‰çš„å®‰è£…ç»†èŠ‚éƒ½å†™åˆ° log é‡Œäº†
æƒ³è¦å¸è½½çš„æ—¶å€™
cat log | xargs rm -rf
å°±å¯ä»¥å¹²å‡€å¸è½½äº†
vi dist/matlab/engine/__init__.py
```

ç„¶è€Œ pip å®‰è£…åŒ…çš„åå­—æ˜¯`matlabengineforpython3-6`ï¼Œæ ¹æœ¬ä¸å¯èƒ½

matlabengineforpython

æƒ³æ³•æ˜¯é”™çš„ï¼ŒåŸdiståœ¨windowså¯ä»¥è·‘ï¼Œåº”è¯¥æ˜¯æ¶æ„çš„é—®é¢˜

1. è°ƒç”¨windowsä¸‹çš„python
2. æ‰¾å‡ºimportlibçš„å·¥ä½œæœºç†

å‡‰å‡‰å‘€

è°ƒè¯•äº†ä¸¤å¤©ï¼Œå‘ç°æ˜¯è‡ªå·±è§£å†³ä¸äº†çš„é—®é¢˜ï¼Œ`matlabengineforpython3-6.pyd`æ–‡ä»¶æ˜¯.dllï¼Œå¯¹äºlinuxä¸‹çš„.soæ–‡ä»¶ï¼Œæ€ä¹ˆèƒ½è®©importè°ƒç”¨å‘¢ï¼Œæ²¡æ—¶é—´è€ƒè™‘äº†ã€‚



### 4. Githubæ·»åŠ SSH keyï¼Œ git

https://help.github.com/articles/connecting-to-github-with-ssh/

```bash
ssh-keygen -t rsa -b 4096 -C "your_email@example.com"
ssh-add ~/.ssh/id_rsa
clip < ~/.ssh/id_rsa.pub
```

github https://github.com/settings/ssh/new

```bash
git config --global user.email "you@example.com"
git config --global user.name "Your Name"
```



### 5. å…¶ä»–ç¯å¢ƒ

- Installing Node

å¦‚æœä½ ä½¿ç”¨zsh,è¯·æ›¿æ¢ä¸º.zshrc

Node is almost as easy to install, letâ€™s use [`nvm`](https://github.com/creationix/nvm) for that inevitable day where we have to support mutliple versions of Node.

```bash
curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.9/install.sh | bash
source ~/.bashrc
nvm install --lts
```

You should now have `node` and `npm` installed.

- Installing Ruby and Rails

Ruby has a few more dependencies. Thankfully WSL has improved so that we can follow any generic â€œHow to Install Ruby on Railsâ€ tutorial, I like this one from [Digital Ocean](https://www.digitalocean.com/community/tutorials/how-to-install-ruby-on-rails-with-rbenv-on-ubuntu-16-04).

```markup
sudo apt install autoconf bison build-essential libssl-dev libyaml-dev libreadline6-dev zlib1g-dev libncurses5-dev libffi-dev libgdbm3 libgdbm-dev
git clone https://github.com/rbenv/rbenv.git ~/.rbenv
echo 'export PATH="$HOME/.rbenv/bin:$PATH"' >> ~/.bashrc
echo 'eval "$(rbenv init -)"' >> ~/.bashrc
source ~/.bashrc
git clone https://github.com/rbenv/ruby-build.git ~/.rbenv/plugins/ruby-build
rbenv install 2.5.1 --verbose
rbenv global 2.5.1
echo "gem: --no-document" > ~/.gemrc
gem install bundler
gem install rails
```

You donâ€™t technically need `--verbose` for installing Ruby via `rbenv`, but having some progress indicator helps with your sense of [time](http://lawsofsimplicity.com/los/law-3-time.html).



## æ·±å…¥è®¨è®º

### 1. å®‰è£…å¤šä¸ªå‘è¡Œç‰ˆ

Windows 10 Fall Creators Update ä¹‹åï¼ŒWSL æ”¯æŒåŒæ—¶å®‰è£…å¤šä¸ª Linux å‘è¡Œç‰ˆï¼Œç›´æ¥åœ¨ Microsoft Store ä¸­æœç´¢æƒ³è¦çš„å‘è¡Œç‰ˆå¹¶ç‚¹å‡»å®‰è£…å³å¯ã€‚è¿™äº›å‘è¡Œç‰ˆå¯ä»¥åŒæ—¶è¿è¡Œï¼Œå¹¶ä¸”æ•°æ®äº’ç›¸ç‹¬ç«‹ã€‚ä½ å¯ä»¥ä½¿ç”¨ `wslconfig.exe` æ¥æŸ¥è¯¢å·²å®‰è£…çš„å‘è¡Œç‰ˆï¼Œæˆ–è€…æ›´æ”¹é»˜è®¤çš„å‘è¡Œç‰ˆã€‚

### 3. å¤šç§è¿›å…¥ WSL çš„æ–¹å¼æ¯”è¾ƒ

æ–°ç‰ˆæ”¯æŒåŒæ—¶å®‰è£…å¤šä¸ªå‘è¡Œç‰ˆï¼Œé‚£è‡ªç„¶ä¸èƒ½åƒä»¥å‰é‚£æ ·åªæä¾›ä¸€ä¸ª `bash.exe` å…¥å£äº†ã€‚

ç§‹å­£åˆ›æ„è€…æ›´æ–°ä¹‹åçš„ Windows æä¾›äº† [å¤šç§è¿›å…¥ WSL ç¯å¢ƒçš„æ–¹å¼](https://blogs.msdn.microsoft.com/commandline/2017/11/28/a-guide-to-invoking-wsl/)ï¼š

- `wsl.exe`

  æ‰“å¼€**é»˜è®¤**å‘è¡Œç‰ˆä¸­çš„é»˜è®¤ Shellã€‚

- `<distroname>.exe`

  æ‰“å¼€**æŒ‡å®š**å‘è¡Œç‰ˆä¸­çš„é»˜è®¤ Shellã€‚

- `bash.exe` (DEPRECATED)

  æ‰“å¼€**é»˜è®¤**å‘è¡Œç‰ˆä¸­çš„ **bash** Shellã€‚

  å¦‚æœä½ æ›´æ”¹äº†é»˜è®¤ Shell å´æ€»æ˜¯æ‰“å¼€ bashï¼Œå°±è¯´æ˜ä½ ä½¿ç”¨äº†è¿™ä¸ªå…¥å£ã€‚

ä½ ä¹Ÿå¯ä»¥é€šè¿‡è¿™äº›å…¥å£ç›´æ¥åœ¨ WSL ä¸­æ‰§è¡Œå‘½ä»¤å¹¶è¿”å›ç»“æœï¼š

- `<distroname> -c [command]`
- `bash -c [command]`
- `wsl [command]`ï¼ˆä¸å†éœ€è¦æŒ‡å®š `-c`ï¼‰

### 4. ä¸ Windows çš„äº’æ“ä½œæ€§

WSL ä¸ Windows ä¹‹é—´çš„äº’æ“ä½œæ€§ (Interoperability) å¾ˆç‰›é€¼ã€‚æ€ä¹ˆä¸ªç‰›é€¼æ³•å‘¢ï¼Ÿ

Windows ä¸‹çš„æ‰€æœ‰ç›˜ç¬¦éƒ½æŒ‚è½½åœ¨ WSL ä¸­çš„ `/mnt` ç›®å½•ä¸‹ï¼Œå¯ä»¥ç›´æ¥æ“ä½œã€‚WSL ä¸­çš„æ‰€æœ‰æ•°æ®åˆ™å­˜æ”¾äº `C:\Users\{ä½ çš„ç”¨æˆ·å}\AppData\Local\Packages\{Linuxå‘è¡Œç‰ˆåŒ…å}\LocalState\rootfs` ç›®å½•ä¸­ï¼ˆä¸è¦åœ¨ Windows ä¸­ä¿®æ”¹è¿™äº›æ–‡ä»¶ï¼Œè¿™ä¼šé€ æˆæ–‡ä»¶æƒé™é”™è¯¯ï¼‰ï¼š

```
$ ls /mnt
c  d  e
$ mount -l
rootfs on / type lxfs (rw,noatime)
C: on /mnt/c type drvfs (rw,noatime,uid=1000,gid=1000)
D: on /mnt/d type drvfs (rw,noatime,uid=1000,gid=1000)
E: on /mnt/e type drvfs (rw,noatime,uid=1000,gid=1000)
```

ä½ å¯ä»¥åœ¨ Windows å‘½ä»¤è¡Œç¯å¢ƒä¸­ç›´æ¥è°ƒç”¨ WSL ä¸­çš„å‘½ä»¤ï¼š

```
PS C:\temp> wsl ls -al
total 0
drwxrwxrwx 1 printempw printempw 4096 Sep  7 19:04 .
drwxrwxrwx 1 printempw printempw 4096 Sep  7 18:38 ..
-rwxrwxrwx 1 printempw printempw    4 Sep  7 19:04 foo.txt
```

ä½ ä¹Ÿå¯ä»¥åœ¨ WSL ä¸­è°ƒç”¨ Windows ä¸­çš„å‘½ä»¤è¡Œç¨‹åºï¼š

```
$ which ipconfig.exe
/mnt/c/Windows/System32/ipconfig.exe
$ ipconfig.exe
Windows IP Configuration
...
```

ä½ å¯ä»¥åœ¨ WSL ä¸­ç›´æ¥å¯åŠ¨ Windows åº”ç”¨ï¼š

```
$ notepad.exe "C:\temp\foo.txt"
```

ä½ è¿˜å¯ä»¥é€šè¿‡ pipes ä¸ Windows ç¨‹åºé€šä¿¡ï¼š

```
# å¤åˆ¶å†…å®¹è‡³ Windows å‰ªè´´æ¿
$ cat foo.txt | clip.exe
```

ä½ ç”šè‡³å¯ä»¥æŠŠ Windows å‘½ä»¤å’Œ WSL å‘½ä»¤æ··ç€ç”¨ï¼š

```
PS> ipconfig | wsl grep IPv4
IPv4 Address. . . . . . . . . . . : 192.168.1.114

$ ipconfig.exe | grep IPv4 | cut -d: -f2
192.168.1.114

$ ls -al | findstr.exe foo.txt
-rwxrwxrwx 1 printempw printempw    4 Sep  7 19:04 foo.txt

$ cmd.exe /c dir
 Volume in drive C is Windows
 Volume Serial Number is B263-****

 Directory of C:\temp

2018/09/07  19:04    <DIR>          .
2018/09/07  19:04    <DIR>          ..
2018/09/07  19:04                 4 foo.txt
               1 File(s)              4 bytes
               2 Dir(s)  194,422,341,632 bytes free
```

åŒæ—¶ï¼ŒWSL ä¸ Windows å…±äº«ç½‘ç»œæ ˆï¼Œä¹Ÿå°±æ˜¯è¯´ä½ å¯ä»¥ï¼š

- åœ¨ WSL ä¸­å¯åŠ¨ web serverï¼Œåœ¨ Windows ä¸Šä½¿ç”¨æµè§ˆå™¨è®¿é—®ï¼›
- åœ¨ Windows ä¸‹å¯åŠ¨ MySQL/Redis æœåŠ¡å™¨ï¼Œåœ¨ WSL ä¸­è¿æ¥ï¼›
- è¯¸å¦‚æ­¤ç±»ã€‚

å¦‚æœä½ å¯¹ WSL ä¸ Windows ä¹‹é—´äº’æ“ä½œçš„åŸç†æœ‰å…´è¶£ï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹è¿™äº›æ–‡ç« ï¼š

- [WSL interoperability with Windows](https://docs.microsoft.com/en-us/windows/wsl/interop)
- [Windows and Ubuntu Interoperability](https://blogs.msdn.microsoft.com/wsl/2016/10/19/windows-and-ubuntu-interoperability/)

### 5. DrvFs æ–‡ä»¶æƒé™é—®é¢˜

è™½ç„¶ WSL ä¸­å¯ä»¥ç›´æ¥è®¿é—® Windows ç£ç›˜çš„å†…å®¹ï¼Œä½†å¦‚æœä½ æ›¾ç»è¿™ä¹ˆåšè¿‡ï¼Œä½ åº”è¯¥å¯¹è¿™æ ·ç»¿æ²¹æ²¹ä¸€ç‰‡çš„ `ls` ä¸ä¼šæ„Ÿåˆ°é™Œç”Ÿã€‚ä¸ºä»€ä¹ˆ NTFS æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶åˆ° WSL ä¸‹æƒé™å°±å…¨éƒ¨æˆ `0777` äº†å‘¢ï¼Ÿ

[![ls-with-wrong-file-permission](https://img.blessing.studio/images/2018/09/08/ls-with-wrong-file-permission.png)](https://img.blessing.studio/images/2018/09/08/ls-with-wrong-file-permission.png)

è¿™ä¸»è¦æ˜¯ DrvFs ä¸­ Linux æ–‡ä»¶æƒé™çš„å®ç°å¯¼è‡´çš„ã€‚

åœ¨ WSL ä¸­ï¼Œ[Microsoft å®ç°äº†ä¸¤ç§æ–‡ä»¶ç³»ç»Ÿ](https://blogs.msdn.microsoft.com/wsl/2016/06/15/wsl-file-system-support/)ï¼Œç”¨äºæ”¯æŒä¸åŒçš„ä½¿ç”¨åœºæ™¯ï¼š

- **VolFs**

  ç€åŠ›äºåœ¨ Windows æ–‡ä»¶ç³»ç»Ÿä¸Šæä¾›å®Œæ•´çš„ Linux æ–‡ä»¶ç³»ç»Ÿç‰¹æ€§ï¼Œé€šè¿‡å„ç§æ‰‹æ®µå®ç°äº†å¯¹ Inodesã€Directory entriesã€File objectsã€File descriptorsã€Special file types çš„æ”¯æŒã€‚æ¯”å¦‚ä¸ºäº†æ”¯æŒ Windows ä¸Šæ²¡æœ‰çš„ Inodesï¼ŒVolFs ä¼šæŠŠæ–‡ä»¶æƒé™ç­‰ä¿¡æ¯ä¿å­˜åœ¨æ–‡ä»¶çš„ NTFS Extended Attributes ä¸­ã€‚è®°å¾—æˆ‘ä¸Šé¢è­¦å‘Šè¿‡ä½ ä¸è¦åœ¨ Windows ä¸­ä¿®æ”¹ WSL é‡Œçš„æ–‡ä»¶å—ï¼Ÿå°±æ˜¯å› ä¸º Windows ä¸­æ–°å»ºçš„æ–‡ä»¶ç¼ºå°‘è¿™ä¸ªæ‰©å±•å‚æ•°ï¼ŒVolFs æ— æ³•æ­£ç¡®è·å–è¯¥æ–‡ä»¶çš„ metadataï¼Œè€Œä¸”æœ‰äº› Windows ä¸Šçš„ç¼–è¾‘å™¨ä¼šåœ¨ä¿å­˜æ—¶æŠ¹æ‰è¿™äº›é™„åŠ å‚æ•°ã€‚

  WSL ä¸­çš„ `/` ä½¿ç”¨çš„å°±æ˜¯ VolFs æ–‡ä»¶ç³»ç»Ÿã€‚

- **DrvFs**

  ç€åŠ›äºæä¾›ä¸ Windows æ–‡ä»¶ç³»ç»Ÿçš„äº’æ“ä½œæ€§ã€‚ä¸ VolFs ä¸åŒï¼Œä¸ºäº†æä¾›æœ€å¤§çš„äº’æ“ä½œæ€§ï¼ŒDrvFs ä¸ä¼šåœ¨æ–‡ä»¶çš„ NTFS Extended Attributes ä¸­å‚¨å­˜é™„åŠ ä¿¡æ¯ï¼Œè€Œæ˜¯ä» Windows çš„æ–‡ä»¶æƒé™ï¼ˆAccess Control Listsï¼Œå°±æ˜¯ä½ å³é”®æ–‡ä»¶ > å±æ€§ > å®‰å…¨é€‰é¡¹å¡ä¸­çš„é‚£äº›æƒé™é…ç½®ï¼‰æ¨æ–­å‡ºè¯¥æ–‡ä»¶å¯¹åº”çš„çš„ Linux æ–‡ä»¶æƒé™ã€‚

  æ‰€æœ‰ Windows ç›˜ç¬¦æŒ‚è½½è‡³ WSL ä¸‹çš„ `/mnt` æ—¶éƒ½æ˜¯ä½¿ç”¨çš„ DrvFs æ–‡ä»¶ç³»ç»Ÿã€‚

ç”±äº DrvFs çš„æ–‡ä»¶æƒé™ç»§æ‰¿æœºåˆ¶å¾ˆå¾®å¦™ï¼Œæœ€åå¯¼è‡´çš„ç»“æœå°±æ˜¯æ‰€æœ‰æ–‡ä»¶çš„æƒé™éƒ½å˜æˆäº† `0777`ã€‚è€Œä¸”ç”±äºæ—©æœŸçš„ DrvFs ä¸æ”¯æŒ metadataï¼Œæ‰€ä»¥ä½ æ— æ³•ç»™è¿™äº›æ–‡ä»¶ chown/chmodï¼Œåªèƒ½å¯¹ç€ç»¿æ²¹æ²¹çš„ `ls` å¹²çªçœ¼ã€‚ä¸è¿‡å¥½æ¶ˆæ¯æ˜¯ï¼ŒWindows Insider Build 17063 ä¹‹åï¼Œ[DrvFs ä¹Ÿåƒ VolFs ä¸€æ ·æ”¯æŒç»™æ–‡ä»¶å†™å…¥ metadata äº†](https://blogs.msdn.microsoft.com/commandline/2018/01/12/chmod-chown-wsl-improvements/)ã€‚

è¦å¯ç”¨ DrvFs çš„ metadata æ”¯æŒï¼Œä½ éœ€è¦æ·»åŠ å‚æ•°é‡æ–°æŒ‚è½½ç£ç›˜ï¼š

```
# ä¿®æ”¹æˆä½ è‡ªå·±çš„ç›˜ç¬¦
$ sudo umount /mnt/e
$ sudo mount -t drvfs E: /mnt/e -o metadata
```

ä¸è¿‡å¦‚æœä»…ä»…æ˜¯æ‰§è¡Œäº†è¿™ä¸ªï¼Œè™½ç„¶æ”¯æŒäº†æ–‡ä»¶æƒé™çš„ä¿®æ”¹ï¼Œä½†ç£ç›˜ä¸‹çš„æ–‡ä»¶æƒé™é»˜è®¤ä¾ç„¶è¿˜æ˜¯ `0777`ï¼Œé™¤éä½ ç»™å®ƒä»¬æ•´ä¸ª `chmod` ä¸€éã€‚å¦‚æœä½ ä¸æƒ³è¿™ä¹ˆåšï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå…¶ä»–çš„ mount å‚æ•°ï¼š

```
$ sudo mount -t drvfs E: /mnt/e -o metadata,uid=1000,gid=1000,umask=22,fmask=111
```

è¿™æ ·ç£ç›˜ä¸‹çš„æ–‡ä»¶çš„é»˜è®¤æƒé™å°±æ˜¯ `0644`ï¼Œ`ls` ä¹Ÿä¸ä¼šå†æ˜¯ç»¿æ²¹æ²¹ä¸€ç‰‡å•¦ã€‚

[![ls-with-fixed-file-permission](https://img.blessing.studio/images/2018/09/08/ls-with-fixed-file-permission.png)](https://img.blessing.studio/images/2018/09/08/ls-with-fixed-file-permission.png)

ä¸è¿‡æ¯æ¬¡ä½¿ç”¨æ—¶éƒ½è¦é‡æ–°æŒ‚è½½æœªå…ä¹Ÿå¤ªçƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦ä¸€ä¸ªæ–°ç‰¹æ€§ [Automatically Configuring WSL](https://blogs.msdn.microsoft.com/commandline/2018/02/07/automatically-configuring-wsl/)å®ç°è‡ªåŠ¨æŒ‚è½½ã€‚åœ¨ WSL ä¸­åˆ›å»º `/etc/wsl.conf`ï¼Œåœ¨å…¶ä¸­å¡«å†™å¦‚ä¸‹å†…å®¹ï¼š

```
[automount]
enabled = true
root = /mnt/
options = "metadata,umask=22,fmask=111"
mountFsTab = true

# è¿™ä¸ªæ–‡ä»¶é‡Œè¿˜å¯ä»¥æ·»åŠ å…¶ä»–é…ç½®é¡¹ï¼Œæœ‰å…´è¶£çš„å¯ä»¥çœ‹çœ‹ä¸Šé¢çš„é“¾æ¥
```

é‡å¯ç»ˆç«¯ï¼Œæ‰€æœ‰çš„ç›˜ç¬¦å°±ä¼šä½¿ç”¨ä¸Šé¢çš„é…ç½®è‡ªåŠ¨æŒ‚è½½å•¦ï¼ˆå¯ä»¥ä½¿ç”¨ `mount -l` æŸ¥çœ‹ï¼‰ã€‚

å¦å¤–ï¼Œå¦‚æœä½ æƒ³è¦ç»™ä¸åŒçš„ç›˜ç¬¦è®¾å®šä¸åŒçš„æŒ‚è½½å‚æ•°ï¼ˆä¸Šé¢çš„æ–¹æ³•å¯¹æ‰€æœ‰ç›˜ç¬¦éƒ½æœ‰æ•ˆï¼Œå¦‚æœä½ æƒ³åœ¨ WSL ä¸­è¿è¡Œ Windows ä¸‹çš„åº”ç”¨ç¨‹åºï¼Œå°±å¾—æ¯æ¬¡éƒ½ `chmod +x` ä¸€ä¸‹ï¼Œæ‰€ä»¥æˆ‘ä¸€èˆ¬éƒ½ä¼šæŠŠ `C:` æ’é™¤æ‰ï¼‰ï¼Œå°±éœ€è¦æ‰‹åŠ¨ä¿®æ”¹ `/etc/fstab`ã€‚é¦–å…ˆç¡®ä¿ `wsl.conf` ä¸­çš„ `mountFsTab` ä¸º `true`ï¼Œç„¶åç¼–è¾‘ `/etc/fstab`ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```
# ä¸åœ¨æ­¤åˆ—è¡¨ä¸­çš„ç›˜ç¬¦ä¼šä½¿ç”¨ wsl.conf ä¸­çš„å‚æ•°æŒ‚è½½
# æ ¼å¼å¯ä»¥è‡ªå·±å»æŸ¥ fstab çš„å¸®åŠ©æ–‡æ¡£
E: /mnt/e drvfs rw,relatime,uid=1000,gid=1000,metadata,umask=22,fmask=111 0 0
```

### 6 å…¶ä»–å…³äº WSL çš„æŠ˜è…¾

è™½ç„¶ Microsoft å¼€å‘ WSL å‡ºæ¥ä¸»è¦æ˜¯ç€é‡äºå‘½ä»¤è¡Œç¯å¢ƒçš„ä½¿ç”¨ï¼Œä½†ç»è¿‡æµ‹è¯•ï¼ŒWSL æ˜¯å¯ä»¥é€šè¿‡ X Server æ‰§è¡Œ GUI åº”ç”¨ç¨‹åºçš„ï¼Œ[ç”šè‡³è¿˜å¯ä»¥åœ¨ WSL é‡Œé¢ç”¨ Wine æ‰§è¡Œ Windows ç¨‹åº](https://news.ycombinator.com/item?id=13603451)â€¦â€¦ï¼ˆğŸ¤”ï¼Ÿï¼‰

ä¹Ÿæœ‰äººè¯•è¿‡åœ¨ WSL ä¸­è¿è¡Œå®Œæ•´çš„ DEï¼Œä½“éªŒä¼¼ä¹è¿˜ä¸é”™ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å»è¯•è¯•ã€‚

å¦å¤–ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡æŸäº›ç¥ç§˜çš„æ–¹æ³•ç”¨ä¸Š Microsoft Store æœªæä¾›çš„ Linux å‘è¡Œç‰ˆï¼Œæ¯”å¦‚ [Arch Linux](https://wiki.archlinux.org/index.php/Install_on_WSL_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29)ã€‚

å¦‚æœä½ å¯¹ WSL çš„åº•å±‚å®ç°æœ‰å…´è¶£ï¼Œä¹Ÿå¯ä»¥å»å›´è§‚ä¸€ä¸‹ WSL çš„å®˜æ–¹åšå®¢ï¼š

- <https://blogs.msdn.microsoft.com/wsl/>
- <https://blogs.msdn.microsoft.com/commandline/tag/wsl/>

## è¸©å‘

åœ¨æ­¤åˆ—ä¸¾æˆ‘é‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼Œå¤§éƒ¨åˆ†è¿˜æ²¡è§£å†³ã€‚å¤§å®¶é‡åˆ°é—®é¢˜æ—¶å¯ä»¥å…ˆåˆ°wslçš„github issue æœç´¢ã€‚

- Ubuntu18.04 é…ç½®Gnomeæ¡Œé¢ç¯å¢ƒå¤±è´¥
- wsl ä¸­ chrome æ— æ³•è¿è¡Œ
- jupyter notebook ä¸ selenium æ— æ³•åŒæ—¶ä½¿ç”¨chrome
- jekyll æ²¡é—®é¢˜
- å¦‚ä½•å¤‡ä»½ç³»ç»Ÿ
- WSLä¸Windowsçš„æ—¶å·®

ä½¿ç”¨è¯¥å‘½ä»¤æ˜¾ç¤ºé”™è¯¯ï¼š

```shell
timedatectl set-local-rtc 1 --adjust-system-clock
```

æ¢ç”¨å¦‚ä¸‹å‘½ä»¤ï¼ŒæŠŠæ—¶åŒºè°ƒæ•´åˆ°`Asia / Shanghai`å°±å¥½

```shell
sudo dpkg-reconfigure tzdata
```


